<html>
<head>
    <script type="text/javascript" src="../../../lib/jquery-latest.min.js"></script>
    <script type="text/javascript" src="../../../js/alpaca.js"></script>
    <script type="text/javascript" src="http://nodeca.github.com/js-yaml/js/js-yaml.js"></script>
    <script type="text/javascript" src="http://raw.github.com/jeffsu/json2yaml/master/src/json2yaml.js"></script>
    <link type="text/css" href="../../../css/alpaca.css" rel="stylesheet"/>
</head>
<body>
    <div id="form1"></div>
	<input type="button" id="form1-button" value="Save">
    <div id="data1"></div>
     
    <script type="text/javascript">

    var doStuff = function(id) {
		var obj = Alpaca.fieldInstances[id];
		alert(json2yaml(obj.getValue()));
    };

    $(function() {
    	$("#form1").alpaca({
    		"schema": {
    			"title":"Form One",
    			"type":"object",
    			"properties": {
    				"name": {
    					"type":"string",
    				},
    				"click_for_more": {
    					"type":"boolean",
    				},
    				"want_more": {
    					"type":"select",
    					"enum":['show me an object array','other option 1', 'other option 2', 'alpaca built my hotrod']
    				},
				"sub_object_single": {
					"type":"object",
					"properties": {
    						"so_bool": {
    							"type":"boolean",
    						},
						"so_item_1": {
							"type":"string",
							dependencies : 'so_bool'
						},
						"so_item_2": {
							"type":"string",
						}
					},
					dependencies : ["click_for_more"]
				},
				"sub_string_array": {
					"type":"array",
					"items": {
						"type":"string",
					},
					default : ['']
				},
				"sub_object_array": {
					"type":"array",
					"items": {
						"type":"object",
						"properties": {
							"so_item_1": {
								"type":"string",
							},
							"so_item_2": {
								"type":"string",
							}
						}
    					},
					dependencies : ["want_more"]
				}
			}
    		},
		"options": {
			"extra_button_function" : "doStuff",
			"fields": {
				"name": {
					"hidden": false,
					"placeholder": "Type something...",
					"helper" : "this is a useful description"
				},
				"sub_string_array": {
					"extra_button_function" : "doStuff",
					"fields" : {
						"item" : {
							"placeholder": "Type something..."
						}
					}
				},
				"sub_object_single" : {
					"fields" : {
						"so_item_1" :{
							dependencies : {
								"so_bool" : true
							},
							placeholder : "Type something..."
						}
					}
				},
				"sub_object_array" : {
					"extra_button_function" : "doStuff",
					"dependencies" : {
						"want_more" : "show me an object array"
					}
				}
			}
		},
		"view": "VIEW_WEB_EDIT_YAML",
    	});
    });
    </script>

</body>
</html>

